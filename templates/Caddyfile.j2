*.{{ domain_name }} {
    tls /etc/caddy/cert.pem /etc/caddy/key.pem

    @appname expression host.split('.')[0] != '*'
    reverse_proxy @appname {
        to "{host.split('.')[0]}-app:80"
    }
}